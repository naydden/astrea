\section{Spare Strategy}
\subsection{Introduction}
When building a satellite constellation with the target to provide global coverage communication relay between LEO satellites and between LEO satellites and the ground, it is crucial to avoid any deterioration of the service. In order to ensure that any possible fail from the satellites would not spoil the constellation operation for more than 6 hours; a spare strategy has to be done. Nowadays, four different types of spare strategies are known:
\begin{itemize} 

\item {Spare satellites in constellation}
\item {In-orbit spare} 
\item {Spare satellites in parking orbits} 
\item {Spare satellites on the ground} 

\end{itemize}
Each existing spare strategy is valid. Despite, depending on the enterprise prioprities the most suitable has to be choosen. In addition, the decision taken is related to the constellation flexibility to degrade the service to a lower performance level during a certain period and to its cost. 

\subsection{Spare Strategy Alternatives}

\textbf{Spare satellites in constellation:}
\newline
This configuration consists on designing the constellation to be \textit{ "overpopulated"}. As it sounds, this means that the system is established with \textit{extra} operative satellites already orbiting within the constellation. For instance, only two overpopulating configurations had been pictured: ovepopulated by one satellite or overpopulated by two satellites per orbital plane. 

\begin{itemize}
\item[-] \textsc{One extra Satellite:}
\newline
By adding an extra satellite to the primary design of the orbital plane configuration, one satellite failure is covered with little time delay to recover the plan. In this way, the constellation continues to work at maximum capacity after a short interruption and at a suitable cost. 
\item[-] \textsc{Two extra Satellites:}
\newline
Usually, by adding two extra satellites per orbital plane the reliability of the service achieves values around the 99.99\%. This configuration increases considerably the cost of the project and it is mainly neccessary in cases where the availability of the satellite is essential for the proper operation of the constellation.
\end{itemize}
Therefore, when designing an overpopulated constallation, the first decition to be made is the number of extra satellite per orbital plane. To guarantee the most optimal configutation a feasibility study is needed.  
\newline
\newline
\textbf{In-orbit spare:}
\newline
The main diference between this strategy and the previous one is that in this case spare satellites are not operative. So the idea is to put some spare satellites in a orbit close to the principal one of the constellation in order to avoid possible collisions between operative satellites and spares. 
\newline
\newline
A few things have to be taken into account when using this method. Firstly,even though the spare satellites are not operative, by being in orbit they deteriorate and by the time they are needed their operative lifetime and performability will not be such as the ones of brand new satellites.Secondly, as their are non-controlled satellites their orbital decay has to be predicted to be aware of possible collitions and avoid them. Thirdly, once any spare satellites is needed, it has to be able to do a two Hohmann transfer to achieve the performance orbit; the first one to reach a phasing orbit and the second one to end in the operational altitude.
\newline
\newline
\textbf{Spare satellites in parking orbits:}
\newline
By mading this choice it has to be assumed that the spare satellites can be keeped in parking orbit until they are needed. Two different option are valid: keeping the rocket in a \textit{"parking"} orbit and then try to send it to the corresponding orbit; or keeping it in in-orbit satellites parkings such as the ISS. The main drawback is that the performance takes a long time until the constellation is recovered and depending on the orbit parameters and the launcher it is not possible to use this strategy.  
\newline
\newline
\textbf{Spare satellites in parking orbits:}
\newline
The simpliest and easiest one; the only thing that has to be done is to build extra satellites. The spares will remain on ground when the constellation is launched. Only in case the structure collapses due to a satellites failure, an emergency launch will put the spares in orbit. Moreover, this method is expensive because every extra launch has a high cost and it can take weeks to recover the constellation performance. 
\newline
\subsection{Spare Strategy Selection}
From all those alternatives, two of them  are quickly discarded: in-orbit spares and in parking orbit spares. The first one is having a non-working satellite in orbit because not only the satellite has to be purchased, but also it has to be launched to a different orbit than the principal one. That fact will increase the cost of the launch or even worst it could create the necessity of an extra launch. Although, the satellites needs to reach the operative orbit and it is known that cubesats propulsion is not really powerful. Furthermore, this satellites might never be needed. So it is highly probable this investment to be a waist of money and sources and this are the main reasons why it has benn discarded.
\newline
\newline
The second is not available in the \textit{Astrea Constellation} case. On the one hand, the main parking in orbit will be the ISS which is at an altitude of 400km above the earth and the constellation is situated at among 550km above the earth. Knowing that, this option is immediately discarded. On the other hand, the Electron the rocket that will accomplish the mission to put the satellites in orbit cannot stay in parking orbit before arriving to its final destination. Definitely, the service cannot rely on this option.
\newline
\newline
Two possible spare strategies remain: pare satellites in the constellation or on ground. In spite deciding if both ones are useful or only one of them is, a feasibility study is done. The objective is analise the diferent kind of failure that have to be covered and determine how the constellation will collapse. Only after that the most suitable strategy method can be designed having as reference the alternatives presented above. 
\subsection{Major failure deffinition}

\paragraph{}In Project Charter, it has been stated that a major failure can be defined as the loss of a client’s satellite coverage because of a failure in the network. However, this deffinition is not enough precise. For example, during a communication, it can happen that a data packet is lost, or has an error and it is discarded. This means that, for that packet, the communication was lost, but it dones not mean that the communication with the client was lost. Another aspect to take into account is that a satellite may fail, but an alternative path can still exist and, therefore, the communication can continue. Morover, if the client satellite loses all communication with all satellites in range, due to the different orbital velocities of the client satellite and the network satellites, the client satellite will eventually be in range of a functional network satellite.

\paragraph{}For all this reasons, a more specific criteria is needed. In Project Charter it has also been stated that the network will provide communication between a client satellite and a ground station with a latency lower than 5 minutes (300 seconds, or 300,0000 miliseconds). A major failure will consiste in a failure in the network that causes a message to arrive from a client satellite to a client ground station with more that 5 minutes of delay, or not arrive at all. Derived from this deffinition, a minor failure can also be deffined. It can be defined as a delay of more that 5 minutes in a communication between a client satellite and a ground station without any failure in the network.

\subsection{Major failure}

\paragraph{}Because of the different height of the client satellite and the network satellites, if all the network satellites is range of the client satellite fail, the client satellite may come in range of a working network satellite if enough time passes. In some cases, this can happen in less than 5 minutes and, therefore, it will not be considered a major failure. For this reason, a more critical situation will be considered. It will be considered that the client satellite moves at the same speed as the network satellites, in the same orbital plane. In this situation, a major failure can happen because for three reasons: all network satellites in range of the client satellite fail, all ground stations fail, or some satellites fail but the alternative path takes more that 5 minutes to transmit the information.

\subsubsection{Satellite in range failure}

\paragraph{}The first reason will be evaluation in the following lines. Depending on the location of the satellite and the distribution of the satellites in the constellation, the number of adjacent satellites may vary. A satellite over the ecuator can have up to six adjacent satellites. If a client satellite only communicates with this network satellite, a major failure will be the failure of this satellite, as it can be seen in Figure \ref{fig:critical1}. It can also be tha failure of a group of satellites surrounding the transmitting satellite, but this number is larger and, therefore, it would not be considered since the failure of the transmitting satellite is more restrictive.
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.5]{./sections/Constellation_Deployment/S5-Spare_Strategy/critical1.png}
\caption[1 communication range failure]{Failure due to the loss of the only satellite in range of the client satellite.}
\label{fig:critical1}
\end{center}
\end{figure}
\paragraph{}For antennas with almost half-spherical patterns (an angle of 10º over their horizontal plane has been considered as the minimum angle capable of recieving and transmitting), the minimum height over the satellite network orbit in order to always see more than one satellite is, aproximately, 400 km, considering that our constellation is at 550 km height over the Earth's surface. This means that a significant portion of clients would be in that zone.

\paragraph{}For clients that have more than one network satellite in range, the critical failure would be similar as the ones in Figure \ref{fig:critical2} and Figure \ref{fig:critical3}. 
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.5]{./sections/Constellation_Deployment/S5-Spare_Strategy/critical2.png}
\caption[3 communication range failure]{Failure due to the loss of all possible communication satellites if the client can communicate to three network satellites.}
\label{fig:critical2}
\end{center}
\end{figure}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.5]{./sections/Constellation_Deployment/S5-Spare_Strategy/critical3.png}
\caption[7 communication range failure]{Failure due to the loss of all possible communication satellites if the client can communicate to seven network satellites.}
\label{fig:critical3}
\end{center}
\end{figure}

\paragraph{}As it can be seen, the critical failure depends on the communication range of the client satellite. Taking the more restrictive one would mean considering the failure of only one satellite. As this affect a significant amount of potential clients, it can not be neglected.

\subsubsection{Ground station failure}

\paragraph{}Since any satellite in the network is able to communicate with any ground station, in order to have a critical failure due to a ground station failure, all ground stations must fail. It will not be considered a failure the loss of connection to a ground station caused by bad weather conditions or radio-fequency interference, since it is not a failure in the network but an anomaly in the medium.

\paragraph{}Therefore, for a critical failure caused by ground station failures to happen, all ground stations must fail. Since at least three ground stations will be used, the three of them must fail. As the previous case, the time of failure dones not matter, but the fact that they remain unoperative at a given time.

\subsubsection{Transmitting time failure}

\paragraph{}In the following lines, a major failure due to a delay supperior to 5 minutes originated by a failure will be evaluated. First of all, it is needed to evaluate the transmission time. The minimmum data rate that will handle the satellites is 25 Mbit/s. Therefore, it will be considered 25 Mbit/s as the data rate of the satellites, since it is the most restrictive. The protocols chosen, by deffault, cannot handle data units of more than 62,500 bytes, aproximately. This is 500.000 bits. With the data rate chosen, the time to transmit this information is 0.02 seconds. For a path of 20 nodes, and considering that a satellites recives the entire packet before sending it again, the transmission time will be 0.4 seconds. The transmission is done using electromagnetic waves, which move at the speed of light. For this short distances, it can be considered to be instantaneously. The time used to process each data packet has to be taken into account. If each node needs 1 second to process the packet, the total processing time will be 20 seconds. 

\paragraph{}Finally, the time to recognize a fallen satellite and the time to compute an alternative route is required. By deffault, OSPF protocol requires 40 seconds of no response to label an adjacent node as dead. When this time expires, the fallen link state will be transmitted. When a node recieves this update, it will wait 5 seconds and then it will calculate new routes. If the process requires 100 seconds, the total time until a failure happens and a new route is calculated is 145 seconds. With the processing time of 20.4 seconds, if one node fails, the time to deliver the message is 165.4 seconds. But if another node fails while the message is still being delivered, the total time to deliver the message would be 310.4 seconds, which is superior to 5 minutes.

\paragraph{}Therefore, for a critical failure to happen because of a delay of more than 5 minutes in the communication due to a failure in the network, two satellites must fail in less than 160 seconds, and both of them must be in a communication path between a client and a ground station.

\subsubsection{Conclusion}

\paragraph{}It can be concluded that a major failure can happen due to various factors:
\begin{itemize}
\item The failure of at one satellites.
\item The failure of all ground stations. It would be at least 3 ground stations.
\item The failure of at least two satellites in a communication route in less than 3 minutes.
\end{itemize}


\subsection{Decision}
\paragraph{}Having studied all the possibilities of failure and taking into account that the porformance of the satellite is guaranteed for four years the conclusion is that there are no spare satellites needed in-orbit because of the fact that the constellation is dimensioned in order to have the capacity to assume some minor expected failures that will not affect the performance of the entire constellation.

\paragraph{}However, there has to be always spares on ground for at least two planes so that in case of a major failure there can be a fast reaction to replace the planes afected. Besides, these satellites will not suppose a great increase in the cost of the constellation because if they are not used as spares they can be used for to following replacement. 


 